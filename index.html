<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Orpington Judging</title>

  <link rel="manifest" href="manifest.json" />
  <link rel="stylesheet" href="style.css" />

  <style>
    html, body { margin:0; padding:0; height:100%; overflow:hidden; }
  </style>
</head>

<body>

  <!-- HOME / INTRO -->
  <div id="introScreen" class="screen screen-blue">
    <div class="centerWrap">
      <h1 class="title">Orpington Show Judging</h1>
      <img src="orpington.png" alt="Orpington" class="heroImg">
      <button class="btn btn-primary" onclick="goShow()">Start Judging</button>
      <button class="btn btn-neutral" onclick="unlockJudge()">Change Show / Judge</button>
    </div>
  </div>

  <!-- SHOW SCREEN -->
  <div id="showScreen" class="screen screen-blue" style="display:none;">
    <div class="centerWrap">
      <h1 class="titleSmall">Select Show</h1>

      <select id="showSelect" class="select">
        <option value="">-- Choose a show --</option>
        <option value="AvioMed Young Chicken Show 2026">AvioMed Young Chicken Show 2026</option>
        <option value="AvioMed Nationals 2026">AvioMed Nationals 2026</option>
        <option value="AvioMed Orpington Show 2026">AvioMed Orpington Show 2026</option>
      </select>

      <button class="btn btn-primary" onclick="saveShowAndContinue()">Next</button>
      <button class="btn btn-back" onclick="goHome()">Back</button>
    </div>
  </div>

  <!-- JUDGE NAME SCREEN -->
  <div id="judgeScreen" class="screen screen-blue" style="display:none;">
    <div class="centerWrap">
      <h1 class="titleSmall">Judge Name</h1>
      <input id="judgeName" class="textInput" placeholder="Enter judge name" />
      <button class="btn btn-primary" onclick="saveJudgeAndContinue()">Next</button>
      <button class="btn btn-back" onclick="goShow()">Back</button>
    </div>
  </div>

  <!-- CLASS SCREEN -->
  <div id="classScreen" class="screen screen-blue" style="display:none;">
    <div class="centerWrap">
      <h1 class="titleSmall">Select Class</h1>

      <div class="grid2">
        <button class="btn btn-neutral" onclick="pickClass('COCKEREL')">Cockerel</button>
        <button class="btn btn-neutral" onclick="pickClass('PULLET')">Pullet</button>
        <button class="btn btn-neutral" onclick="pickClass('COCK')">Cock</button>
        <button class="btn btn-neutral" onclick="pickClass('HEN')">Hen</button>
      </div>

      <button class="btn btn-back" onclick="goJudge()">Back</button>
    </div>
  </div>

  <!-- COLOUR SCREEN -->
  <div id="colourScreen" class="screen screen-blue" style="display:none;">
    <div class="centerWrap">
      <h1 class="titleSmall">Select Colour</h1>

      <div id="colourList" class="scrollList"></div>

      <button class="btn btn-back" onclick="goClass()">Back</button>
    </div>
  </div>

  <!-- JUDGING SCREEN -->
  <div id="judgingScreen" class="screen screen-dark" style="display:none; overflow:auto;">
    <div class="topBar">
      <div>
        <div class="metaLine">Show: <strong><span id="showNameDisplay">-</span></strong></div>
        <div class="metaLine">Judge: <strong><span id="judgeNameDisplay">-</span></strong></div>
        <div class="metaLine">Class: <strong><span id="classDisplay">-</span></strong> • Colour: <strong><span id="colourDisplay">-</span></strong></div>
      </div>
      <button class="btnSmall btn-back" onclick="goColour()">Change Colour</button>
    </div>

    <div class="card">
      <label>Bird ID</label>
      <input type="text" id="birdId" class="textInput" />

      <div class="row2">
        <button class="btn btn-danger" onclick="toggleDQ()">Disqualify</button>
        <div id="dqStatus" class="dqPill">DQ: No</div>
      </div>

      <div id="dqPanel" style="display:none;">
        <label>DQ Reason</label>
        <select id="dqReason" class="select">
          <option value="">-- Select reason --</option>
          <option value="Wrong colour / variety">Wrong colour / variety</option>
          <option value="Severe defect">Severe defect</option>
          <option value="Poor condition / illness">Poor condition / illness</option>
          <option value="Wrong class / sex">Wrong class / sex</option>
          <option value="Other">Other</option>
        </select>
        <label>DQ Note</label>
        <input id="dqNote" class="textInput" placeholder="Short note (optional)" />
      </div>

      <!-- Sliders with live values -->
      <div class="sliderBlock">
        <div class="sliderHead"><span>Head & Comb</span><span id="v_head" class="valPill">0</span></div>
        <input type="range" min="0" max="20" id="head" value="0">
      </div>

      <div class="sliderBlock">
        <div class="sliderHead"><span>Body & Type</span><span id="v_body" class="valPill">0</span></div>
        <input type="range" min="0" max="30" id="body" value="0">
      </div>

      <div class="sliderBlock">
        <div class="sliderHead"><span>Legs & Feet</span><span id="v_legs" class="valPill">0</span></div>
        <input type="range" min="0" max="15" id="legs" value="0">
      </div>

      <div class="sliderBlock">
        <div class="sliderHead"><span>Plumage Colour</span><span id="v_colour" class="valPill">0</span></div>
        <input type="range" min="0" max="25" id="colour" value="0">
      </div>

      <div class="sliderBlock">
        <div class="sliderHead"><span>Condition</span><span id="v_condition" class="valPill">0</span></div>
        <input type="range" min="0" max="10" id="condition" value="0">
      </div>

      <h2 class="totalLine">Total: <span id="total">0</span></h2>

      <label>Comment (optional)</label>
      <input id="comment" class="textInput" placeholder="Quick note…" />

      <button class="btn btn-save" onclick="saveBird()">Save Bird</button>
      <button class="btn btn-results" onclick="openResultsMode('classColour')">View Results</button>

      <div class="syncLine">
        <span id="syncStatus">Status: Ready</span>
        <button class="btnSmall btn-neutral" onclick="syncNow()">Sync Now</button>
      </div>
    </div>
  </div>

  <!-- RESULTS SCREEN -->
  <div id="resultsScreen" class="screen screen-dark" style="display:none; overflow:auto;">
    <div class="topBar">
      <div>
        <div class="metaLine">Show: <strong><span id="resultsShowName">-</span></strong></div>
        <div class="metaLine">All judges combined (from Google Sheet)</div>
      </div>
      <button class="btnSmall btn-back" onclick="backToJudging()">Back</button>
    </div>

    <div class="card">
      <div class="grid2">
        <button class="btn btn-results" onclick="openResultsMode('classColour')">Best in Class + Colour (Top 5)</button>
        <button class="btn btn-neutral" onclick="openResultsMode('variety')">Best in Variety (Top 3)</button>
        <button class="btn btn-save" onclick="openResultsMode('breed')">Best in Breed</button>
        <button class="btn btn-neutral" onclick="syncNow()">Sync Now</button>
      </div>

      <div id="resultsContent" style="margin-top:14px;"></div>

      <div style="margin-top:14px;">
        <button class="btn btn-danger" onclick="resetShowFlow()">New Show (Home)</button>
        <button class="btn btn-neutral" onclick="exportCSV()">Export (This Device)</button>
      </div>
    </div>
  </div>

  <script src="app.js?v=3000"></script>
</body>
</html>
